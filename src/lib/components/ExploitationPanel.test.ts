/**
 * Smoke tests for ExploitationPanel component
 */

import { describe, it, expect } from 'vitest';
import { createInitialGameState } from '$lib/game/config';

describe('ExploitationPanel Component Logic', () => {
	it('should import component without errors', async () => {
		const module = await import('./ExploitationPanel.svelte');
		expect(module.default).toBeDefined();
	});

	it('should handle active boosts', () => {
		const state = createInitialGameState();
		state.activeBoosts.push({
			abilityId: 'bot_streams',
			name: 'Bot Streams',
			multiplier: 1.5,
			expiresAt: Date.now() + 10000,
			type: 'income'
		});

		expect(state.activeBoosts.length).toBe(1);
		expect(state.activeBoosts[0].type).toBe('income');
	});

	it('should filter expired boosts', () => {
		const state = createInitialGameState();
		const now = Date.now();

		state.activeBoosts.push(
			{
				abilityId: 'active',
				name: 'Active Boost',
				multiplier: 2.0,
				expiresAt: now + 10000,
				type: 'income'
			},
			{
				abilityId: 'expired',
				name: 'Expired Boost',
				multiplier: 1.5,
				expiresAt: now - 1000,
				type: 'fans'
			}
		);

		const active = state.activeBoosts.filter(b => b.expiresAt > now);
		expect(active.length).toBe(1);
		expect(active[0].abilityId).toBe('active');
	});
});
